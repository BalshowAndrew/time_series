# Вебинар 2. Элементарные методы анализа временных рядов
Методы, которые используется для избавления временного ряда от шума

## Скользящее среднее (moving average) = MA
Предсказание следующего элемента временного ряда на основе нескольких предыдущих (используем среднее значение этих элементов).

$\hat{y}_{t} = \frac{1}{k} \displaystyle\sum^{k-1}_{n=0} y_{t-n}$

Окно - это количество предыдущих элементов.
Новый график получается со сдвигом, равным размеру окна.

**Достоинства метода**:
- простая реализация;
- в случае сильно зашумленных данных метод помогает определить тренд.

**Недостатки метода**:
- происходит запаздывание сглаженного временного ряда;
- повышенная чувствительность к выборосам данных.

>[!note] Чем меньше размер окна, тем хуже сглаживание, но меньше запаздывание.
>Чем больше размер окна, тем лучше сглаживание, но больше запаздывание.

Метод не очень эффективен для предсказаний временного ряда (разве что предсказание следующего значения): после 10 предсказаний график выходит на плато.

## Взвешенное скользящее среднее (weighted moving average) = WMA
Каждое значение в прошлом имеет свой вес:

$\hat{y}_{t} = \displaystyle\sum^{k}_{n=1} \omega_n y_{t+1-n}$

Обычно, чем ближе измерение к прогнозируемому, тем больше его вес. Для этого можно использовать любую возрастающую последовательность (арифметическую прогрессию, последовательность Фибоначи, геометрическую прогрессию и т.д.)
Сумма ${\omega}$ должна быть равна единице:

$\displaystyle\sum^{k}_{n=1} {\omega_n} = 1$

**Достоинства метода**:
- Учитывается временной контекст (чем раньше было событие, тем меньше оно влияет на прогнозируемое значение

**Недостатки метода**:
- Повышенная чувствительность к выбросам данных, как и в **МА**


## Экспоненциальное сглаживание (exponential moving average) = EMA

Чем дальше изменение, тем меньше вклад

$\hat{y}_{t} = \alpha \cdot y_t + (1-\alpha) \cdot \hat y_{t-1} $

Формула рекурсивная...

**Преимущества метода**:
- учитывает временной контекст;
- всегда начинается с нуля;
- нет параметра **размер окна** (размер окна равен от значения до начала временного раяда);
- достаточно задать параметр $\alpha$, который равен значению от 0 до 1 (значение этого параметра будет влиять на отзывчивость)


**Недостатки метода**:
- не учитывает временные компоненты, такие как тренд или сезонность

## Двойное эскпоненциальное сглаживание (double exponential moving average) = DEMA

$\hat{y}_t=l_t + s_t$

$s_t$ - это компонента тренда:

$s_t = \beta (l_t - l_{t-1}) + (1 - \beta) s_{t-1}$

$l_t$ - это компонента уровня:

$\hat{l}_t = \alpha y_t + (1-\alpha)(l_{t-1} + s_{t-1})$

Как видно из формул у нас уже два переметра: $\alpha$ и $\beta$

DEMA лучше использовать для предсказания, если временной ряд имеет тренд.

**Преимущества метода**:
- Учитывает временной контекст
- Берет в расчет трендовую составляющую

**Недостатки метода**:
- "Ломается", если подать на вход временной ряд, имеющий сезонность

## Тройное экспоненциальное сглаживание. Метод Хольта-Винтерса = TEMA

Суть метода в том, что мы начинаем учитывать еще и сезонность. Она появляетсЯ в виде третьей компоненты.

Метод применим только в случае сезонности. Если ее нет, то метод Хольта-Винтерса не даст хороших результатов.

$l_t = \alpha(y_t - p_{t-\tau}) + (1-\alpha)(l_{t-1} + s_{t-1})$

$s_t = \beta(l_t - l_{t-1}) + (1-\beta)s_{t-1}$

Добавился конпонент сезонности $p_t$

$p_t = \gamma(y_t - l_t) + (1-\gamma)p_{t-\tau}$

$\hat{y}_{t+m} = l_x + s_t + p_{t-\tau+1+(m-1)mod\tau}$

Как видно из формул у нас уже три переметра: $\alpha$, $\beta$ и $\gamma$

**Преимущества метода**:
- Учитывает временной контекст
- Берет в расчет трендовую и сезонную составляющую

**Недостатки метода**:
- Если временной ряд не имеет сезонности, то результаты будут хуже, чем у аналогов

## Подбор параметров








